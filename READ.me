# OwnDrive

A collaborative fullstack cloud storage solution built with modern web technologies. OwnDrive provides users with a personal cloud drive experience similar to Google Drive or Dropbox, with features for file management, sharing, and collaboration.

## ğŸ“‹ Table of Contents

- [Overview](#overview)
- [Technologies Used](#technologies-used)
- [Project Structure](#project-structure)
- [Features](#features)
  - [Frontend Features](#frontend-features)
  - [Backend Features](#backend-features)
- [Database Schema](#database-schema)
- [Security Features](#security-features)
- [Getting Started](#getting-started)
- [API Documentation](#api-documentation)

## ğŸ¯ Overview

OwnDrive is a web-based server storage solution that allows users to upload, organize, and collaborate on files through an intuitive interface. The project demonstrates a complete fullstack implementation with separate frontend and backend architectures.

## ğŸ› ï¸ Technologies Used

### Frontend
- **React** - JavaScript library for building the user interface
- **TypeScript** - Primary language for type-safe development
- **Vite** - Lightning-fast frontend build tool with HMR
- **Tailwind CSS, Emotion, Material-UI** - Styling
- **Clsx** - Conditional className utilities
- **Shadcn/ui, Radix UI, Headless UI, Mantine** - Pre-made UI components
- **TipTap** - Modern WYSIWYG rich-text editor
- **Lucide React, React Icons** - Icons
- **Internationalization (i18n)** - Language translation, automatic language detection
- **React Router DOM** - Declarative routing
- **Axios** - Promise-based HTTP client for API requests

### Backend
- **Node.js** - JavaScript runtime environment
- **Express** - Web application framework for Node.js
- **MongoDB** - NoSQL database for storing user data and file metadata
- **Mongoose** - ODM for MongoDB with schema validation
- **Puppeteer** - Testing
- **Faker.js** - Generate realistic fake data for testing DB records
- **JWT** - JSON Web Tokens for authentication
- **bcrypt** - Password hashing
- **Multer** - File upload handling
- **Concurrently** - Run multiple npm scripts simultaneously
- **CORS** - Cross-Origin Resource Sharing for API access

 
## ğŸ—ï¸ Project Structure

```
owndrive/
â”œâ”€â”€ frontend/          # React-based client application
â”‚   â”œâ”€â”€ public/
â”‚   â”‚   â”œâ”€â”€locales/    #Internationalization
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/    # React Components
|   |   |   â”œâ”€â”€ context/   #Global context 
|   |   |   â”œâ”€â”€ ui/   #Shadcn's locally stored components
|   |   |   â”œâ”€â”€ main_components/   
|   |   |   â”œâ”€â”€ popups/
|   |   |   â””â”€â”€ ...        #Other components
â”‚   â”‚   â”œâ”€â”€ hooks/         # Hooks for user and file
â”‚   â”‚   â”œâ”€â”€ utils/         # Utility functions
â”‚   â”‚   â”œâ”€â”€ types/         # TypeScript types
â”‚   â”‚   â””â”€â”€ App.tsx        
â”‚   â”‚   â””â”€â”€ main.tsx      
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ server/            # Express backend API
â”‚   â”œâ”€â”€ middleware/    # User validation, multer config
â”‚   â”œâ”€â”€ models/        # MongoDB models
â”‚   â”œâ”€â”€ routes/        # API routes
â”‚   â”œâ”€â”€ scripts/   # DB-related scripts (seed, droptable)
â”‚   â”œâ”€â”€ types/   # 
â”‚   â”œâ”€â”€ validators/    #Input validation
â”‚   â”œâ”€â”€ app.ts
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ package.json       # Root package configuration
```

## âœ¨ Features

### Frontend Features

#### 1. User Interface Components
- **File Explorer View**: Dashboard view options for browsing files and Folders
- **Search Bar**: Real-time search functionality across all files and folders
- **Advanced Filtering** : 

#### 2. File Upload System
- **Single-file Upload**: Select and upload multiple files simultaneously

#### 3. File Management
- **Rename Files**: Edit names directly in the interface
- **Delete Files**: Archive with recovery and deletion options
- **Download Files**: Download a single file
- **File Details**: View metadata (type, creation/uplaod date, last modified)

#### 4. Sharing & Collaboration
- **Share Links**: Generate shareable links for files
- **Permission Management**: Set edit permissions
- **User Collaboration**: Share directly with other registered users

#### 5. User Authentication UI
- **Login/Signup Forms**: Clean, responsive authentication interfaces
- **Profile Management**: Update user information and settings
- **Session Management**: Secure token-based authentication

### Backend Features

#### 1. Authentication & Authorization System

**Routes:**
```
POST /api/auth/register        - User registration
POST /api/auth/login           - User login with JWT token generation
POST /api/auth/logout          - Session termination
```

**Features:**
- JWT Token Authentication - Secure stateless authentication
- Password Hashing - bcrypt for secure password storage
- Session Management - Token-based session handling
- Role-Based Access Control - Different permission levels (user, admin)

#### 2. File Management API

**Routes:**
```
GET    /api/files               - List all user files
GET    /api/files/:id           - Get specific file details
POST   /api/files/:id          - Create new file 
POST   /api/files/upload        - Upload a new file
PUT    /api/files/:id           - Update file
PUT    /api/files/:id/lock      - Lock file
PUT    /api/files/:id/unlock    - Unlock file
DELETE /api/files/:id           - Delete file
```

**Features:**
- Multer Integration -  Form-data handling for uploads
- File Storage - Files stored in multer's session storage
- Metadata Management - Store file information in MongoDB
- Unique File Naming - Prevent naming conflicts in a user's dashboard

#### 4. Sharing System API

**Features:**
- Permission Levels - Read, write, admin access levels

#### 5. User Management API

**Routes:**
```
GET    /api/users/     - Get all user emails
GET    /api/users/me   - Get user profile
GET    /api/users/:id/profile_picture   - Get user profile picture
PUT    /api/users/me   - Update profile picture
```

**Features:**
- Profile Management - User info, avatar, preferences (light/dark mode)

#### 6. Searching, Sorting and Filtering (Frontend)

**Features:**
- Full-Text Search 
- Metadata Search - Search by name and owner
- Advanced filtering based on file type, creation date and owner
- Sorting: alphabetical of filename or creator, last modified

## ğŸ—„ï¸ Database Schema

### Users Collection
```typescript
{
  _id: ObjectId, 
  username?: string,
  email: string,
  password_hash: string,
  profile_pic?: ObjectId (ref: "Image"),
  files: ObjectId[] (ref: "File"),
}
```

### Files Collection
```typescript
{
  created_at: Date,
  created_by: Types.ObjectId,
  last_edited_at: Date,
  file_type: string,
  filename: string,
  mime_type: string,
  content?: string,
  data?: Buffer,
  canView: ObjectId[] (ref: "User"),
  canEdit: ObjectId[] (ref: "User"),
  visibleToGuests: boolean,
  showsInHomeShared: boolean,
  private: boolean,
  status: string, //"active" or "archived",
  archivedAt?: Date,
  inUse: boolean,
  usedBy?: ObjectId (ref: "User"),
}
```

### Images Collection
```typescript
{
  filename: string,
  description: string,
  path: string,
  createdAt: Date,
}
```


## ğŸ” Security Features

### Authentication Security
- JWT tokens with expiration
- Secure password hashing (bcrypt)

### File Security
- File type validation
- Secure file naming (prevent path traversal and invalid characters)

### Access Control
- Input sanitization and validation

### Data Protection
- Secure storage of sensitive data

## ğŸš€ Getting Started

### Prerequisites
- Node.js (v14 or higher)
- MongoDB instance
- npm or yarn package manager

### Installation

1. Clone the repository
```bash
git clone https://github.com/lillabbbbbb/owndrive.git
cd owndrive
```

2. Install project dependencies
```bash
npm install
```

3. Install backend dependencies
```bash
cd server
npm install
```

4. Install frontend dependencies
```bash
cd ../frontend
npm install
```

5. Set up environment variables
Create `.env` file in the server directory:
```env
PORT=8000
MONGODB_URI=mongodb://localhost:27017/owndrive
JWT_SECRET=your_jwt_secret_key
```

5. Run frontend and backend concurrently in development mode
```bash
cd ..
npm run dev
```

7. Open your browser and navigate to `http://localhost:3000/home`

## ğŸ“š API Documentation

### Authentication Endpoints

#### Register User
```http
POST /api/auth/register
Content-Type: application/json

{
  "email": "user@example.com",
  "password": "password123",
  "username": "John B",
}
```

#### Login
```http
POST /api/auth/login
Content-Type: application/json

{
  "email": "user@example.com",
  "password": "password123"
}
```

#### Delete File
```http
DELETE /api/files/:id
Authorization: Bearer {token}
```

## ğŸ“Š Additional Features

### Performance Optimization
- Lazy loading for large file lists
### User Experience
- Responsive design for mobile devices
- Loading states and progress indicators
- Error handling and user feedback
- Keyboard shortcuts

### Admin Features
- User management dashboard
- System-wide statistics
- Storage usage monitoring
- Activity logs and analytics

## ğŸš€ Technical Highlights

- **TypeScript**: Type safety across the entire application
- **RESTful API**: Clean, documented API endpoints
- **Error Handling**: Comprehensive error handling and logging
- **Validation**: Input validation
- **Middleware**: Express middleware for authentication
- **Database**: MongoDB with Mongoose ODM for schema validation

## ğŸ¤ Contributing

Contributions, issues, and feature requests are welcome! Feel free to check the issues page.

1. Fork the project
2. Create your feature branch (`git checkout -b feature/AmazingFeature`)
3. Commit your changes (`git commit -m 'Add some AmazingFeature'`)
4. Push to the branch (`git push origin feature/AmazingFeature`)
5. Open a Pull Request

## ğŸ“ License

Not specified yet.

## ğŸ‘¥ Authors

- [@lillabbbbbb](https://github.com/lillabbbbbb)

**Note:** This is a fullstack learning project demonstrating modern web development practices with enterprise-level features including authentication, file handling, database design, and collaborative capabilities.